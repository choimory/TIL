# TCP, UDP에서 포트번호는 어떻게 사용되는가

### TCP와 UDP에서의 포트 번호 사용

- *TCP(Transmission Control Protocol)*와 **UDP(User Datagram Protocol)**는 모두 **전송 계층 프로토콜**로, 각각의 프로토콜에서 포트 번호는 통신을 관리하는 중요한 역할을 한다.
- 이 두 프로토콜은 **포트 번호**를 사용하여 **네트워크 상의 데이터 흐름을 특정 애플리케이션으로 연결**하지만, **작동 방식**은 다르다.

---

# **TCP에서의 포트 번호 사용**

- TCP는 **연결 기반**의 프로토콜로, 신뢰할 수 있는 통신을 제공한다.
- TCP는 포트 번호를 사용해 **클라이언트와 서버 간의 연결**을 설정하고, 연결이 유지되는 동안 데이터를 순차적으로 주고받는다.

## **TCP 연결 과정**:

- TCP는 **3-way handshake**를 통해 클라이언트와 서버 간의 연결을 설정한다.
- 이 과정에서 **IP 주소와 포트 번호**를 사용하여 **특정 애플리케이션**과의 연결을 설정한다.

## **포트 번호의 역할**:

- TCP는 연결이 이루어지는 동안 클라이언트의 요청이 **올바른 애플리케이션**으로 전달되도록 포트 번호를 사용한다.
    - 예를 들어, 클라이언트가 웹 서버에 HTTP 요청을 보내면, 서버의 80번 포트가 해당 요청을 처리하게 된다.

## **포트 번호 조합**:

- TCP는 **소스 포트**(클라이언트 측 임시 포트)와 **목적지 포트**(서버 측 지정 포트)를 함께 사용하여 통신을 수행한다.
- 예를 들어, 클라이언트에서 임시로 `49152번 포트`를 사용하여 서버의 `80번 포트`로 요청을 보낼 수 있다.

## **세션 유지**:

- TCP는 연결을 지속적으로 유지하며, 데이터의 신뢰성(데이터 손실 방지, 순서 보장)을 보장한다.
- 따라서 포트 번호는 **지속적인 세션 관리**에도 중요한 역할을 한다.

---

# **UDP에서의 포트 번호 사용**

- UDP는 **비연결형** 프로토콜로, TCP와 달리 **데이터 전송의 신뢰성**을 보장하지 않는다.
- 데이터가 손실되거나 순서가 뒤바뀔 수 있지만, **속도가 중요한 통신**에서 주로 사용된다.
- UDP에서도 포트 번호는 통신할 애플리케이션을 식별하는 데 사용된다.

## **비연결형 통신**:

- UDP는 클라이언트가 서버에 데이터를 보내는 즉시 전송이 완료되며, **연결을 설정하거나 유지하지 않는다**.
- 즉, 포트 번호는 연결을 설정하지 않더라도 **각 메시지가 올바른 애플리케이션으로 전달되도록** 관리된다.

## **포트 번호의 역할**:

- UDP에서 포트 번호는 주로 **데이터그램을 처리할 애플리케이션**을 식별하는 데 사용된다.
- 예를 들어, DNS 서버는 `53번 포트`를 사용하여 클라이언트의 DNS 요청을 처리한다.

## **포트 번호 조합**:

- UDP도 TCP와 마찬가지로 **소스 포트**와 **목적지 포트**를 사용하지만, 연결을 유지하지 않기 때문에 각각의 데이터그램은 독립적으로 전송된다.

## **응용 사례**:

- UDP는 **실시간 스트리밍**(VoIP, 온라인 게임, 동영상 스트리밍 등)이나 **간단한 요청-응답**(DNS 요청 등)에서 주로 사용된다.
- 이 경우 **포트 번호**는 여러 클라이언트의 요청을 관리하는 데 필수적이다.

---

# 포트 번호 사용 예시

## **웹 브라우저**:

- 웹 브라우저가 웹 서버에 접속할 때 **TCP 80번 포트(HTTP)** 또는 **443번 포트(HTTPS)**를 사용해 서버와 연결한다.
- 클라이언트의 웹 브라우저는 임시 포트 번호(예: 49152번)를 사용해 서버와 연결한다.

## **DNS 요청**:

- 클라이언트가 DNS 서버에 이름 해석 요청을 보낼 때, **UDP 53번 포트**를 사용해 서버에 요청을 전송한다.

## **SSH 연결**:

- 클라이언트가 원격 서버에 **SSH**를 사용해 접속할 때는 **TCP 22번 포트**를 사용하여 연결한다.

---

# 비교

| **특징** | **TCP** | **UDP** |
| --- | --- | --- |
| **프로토콜 유형** | 연결형 (3-way handshake) | 비연결형 |
| **신뢰성** | 데이터의 신뢰성 보장 (재전송, 순서 보장) | 신뢰성 없음 (재전송 없음, 순서 보장 안 함) |
| **포트 번호 사용** | 소스 포트와 목적지 포트로 세션 유지 | 소스 포트와 목적지 포트를 통해 데이터그램 전달 |
| **응용 사례** | HTTP, HTTPS, FTP, 이메일 등 신뢰성 요구 서비스 | DNS, VoIP, 동영상 스트리밍 등 속도 우선 서비스 |
| **세션 관리** | 세션 유지 및 관리 | 세션 없음, 독립적인 데이터 전송 |

---

# 결론

- **포트 번호**는 네트워크에서 **애플리케이션 간의 통신을 식별**하고 관리하는 중요한 역할을 한다.
- **TCP**에서는 **신뢰성**을 보장하며 연결을 유지하는 데 사용되며, **UDP**에서는 **빠르고 간단한 통신**을 위해 포트 번호를 사용해 비연결형 데이터 전송을 처리한다.
- 포트 번호는 클라이언트와 서버 간의 통신을 올바르게 라우팅하는 데 필수적이며, 다양한 네트워크 서비스에서 필수적으로 사용된다.