# 쿠키, 세션, JWT

- 쿠키, 세션, JWT는 웹 애플리케이션에서 인증과 상태 유지를 위해 사용되는 기술이다.

# **쿠키 (Cookies)**

## **역할**:

- 서버가 클라이언트(브라우저)에 저장하는 작은 데이터 조각이다.

## **저장 위치**:

- 클라이언트(브라우저) 쪽에 저장됨.

## **데이터 구조**:

- 키-값 쌍의 형태로 저장되며, 문자열 데이터만 가능하다.

## **주요 기능**:

- 인증 정보를 포함해 사용자의 설정 정보, 방문 기록 등을 저장하는 데 사용된다.
- 쿠키를 이용해 로그인 세션을 유지할 수 있다.

## **보안**:

- 중요한 정보는 포함하지 않는 것이 좋으며, HTTPOnly와 Secure 플래그를 사용하여 보안을 강화할 수 있다.

---

# **세션 (Session)**

## **역할**:

- 서버 측에 사용자의 상태 정보를 저장하는 구조이다.
- 세션은 서버에서 특정 사용자에 대한 정보를 저장하고 관리한다.

## **저장 위치**:

- 서버에 저장되며, 세션 ID는 쿠키에 저장하거나 URL 파라미터로 전달된다.

## **데이터 구조**:

- 서버 메모리나 데이터베이스에 세션 정보를 저장한다.
- 사용자와 관련된 데이터를 많이 저장할 수 있다.

## **주요 기능**:

- 사용자가 로그인하면 서버는 고유한 세션 ID를 생성하고, 이를 클라이언트의 쿠키에 저장한다.
- 이후 클라이언트가 요청을 보낼 때마다 이 세션 ID를 전송하여 서버가 해당 사용자를 식별한다.

## **보안**:

- 중요한 데이터는 서버에 저장되므로, 데이터 노출 위험이 상대적으로 적다.
- 하지만, 세션 고정 공격(Session Fixation Attack)을 방지하기 위해 세션 ID를 관리해야 한다.

---

# **JWT (JSON Web Token)**

## **역할**:

- 클라이언트와 서버 사이에 인증 정보를 주고받기 위해 사용되는 구조이다.
- 주로 클라이언트가 서버로부터 발급받은 토큰을 저장하고, 이를 통해 인증한다.

## **저장 위치**:

- 클라이언트에 저장되며, 보통 로컬 스토리지나 쿠키에 저장된다.

## **데이터 구조**:

- 토큰은 크게 헤더, 페이로드, 서명으로 구성된다.
- 페이로드에 사용자의 인증 정보나 기타 데이터를 포함할 수 있다.

## **주요 기능**:

- 사용자가 로그인하면 서버에서 JWT를 생성해 클라이언트로 전달한다.
- 클라이언트는 이 JWT를 요청 헤더에 포함해 서버로 전송하여 인증을 수행한다.

## **보안**:

- JWT는 기본적으로 서명되어 있어 위변조를 방지할 수 있다.
- 하지만 페이로드는 기본적으로 암호화되지 않으므로 민감한 데이터를 담으면 안 된다.
- Access Token과 Refresh Token을 함께 사용해 보안을 강화할 수 있다.

---

# **비교**

## **저장 위치**:

- 쿠키와 JWT는 클라이언트에, 세션은 서버에 저장된다.

## **확장성**:

- 세션은 서버에 저장되므로 서버 확장 시 관리가 어려워질 수 있지만, JWT는 상태를 서버에서 유지하지 않아 서버 확장성이 좋다.

## **보안성**:

- 세션은 서버에서 직접 관리하기 때문에 비교적 안전하다. 쿠키는 노출 가능성이 있으므로 민감한 정보를 담지 않아야 한다. JWT는 자체 서명으로 위변조를 방지할 수 있지만, 페이로드는 누구나 볼 수 있으므로 민감한 정보를 포함하지 않도록 해야 한다.

## **유지 보수**:

- 세션은 서버의 메모리나 데이터베이스를 사용해 관리하므로, 서버 부하가 커질 수 있다. JWT는 이를 분산할 수 있어 유지 보수가 상대적으로 쉽다.